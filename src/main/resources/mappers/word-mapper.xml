<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.daun.word.word.domain.repository.WordRepository">
    <insert id="save" parameterType="com.daun.word.word.domain.Word" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
        /* 회원 생성 */
        INSERT INTO word
        (
        english,
        korean
        )
        VALUES
        (
        #{english.value},
        #{korean.value}
        )
        <selectKey keyColumn="id,created_at,updated_at" keyProperty="id,createdAt,updatedAt"
                   resultType="java.util.HashMap" order="AFTER">
            SELECT word.id,
            word.created_at,
            word.updated_at
            FROM word
            where word.id = LAST_INSERT_ID();
        </selectKey>
    </insert>

    <select id="findByEnglish" resultType="com.daun.word.word.domain.Word">
        SELECT word.id,
               word.english,
               word.korean,
               word.created_at,
               word.updated_at
          FROM word
         WHERE word.english = #{english.value};
    </select>

    <select id="findByKorean" resultType="com.daun.word.word.domain.Word">
        SELECT word.id,
               word.english,
               word.korean,
               word.created_at,
               word.updated_at
          FROM word
         WHERE word.korean = #{korean.value};
    </select>
</mapper>
